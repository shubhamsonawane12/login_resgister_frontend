{"ast":null,"code":"import\"./css/Main.css\";import{useEffect,useState}from\"react\";import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import Home from'./components/Home';import Signup from'./components/Signup';import Cookies from'universal-cookie';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cookies=new Cookies();const token=cookies.get('token');function Main(){const[userData,setUserData]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{if(token){fetchUserData();}else{setLoading(false);}},[token]);const fetchUserData=async()=>{try{const response=await fetch('https://login-registration-system-backend4.onrender.com/api/auth/profile',{method:'GET',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setUserData(data);}else{console.error('Failed to fetch user data:',response.statusText);}}catch(error){console.error('Error fetching user data:',error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading....\"});// Replace with your preferred loading indicator\n}console.log(\"userdata from main:\",userData);return/*#__PURE__*/_jsx(\"div\",{className:\"Main\",children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Signup,{})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:userData?/*#__PURE__*/_jsx(Home,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]})})});}export default Main;","map":{"version":3,"names":["useEffect","useState","BrowserRouter","Router","Route","Routes","Navigate","Home","Signup","Cookies","jsx","_jsx","jsxs","_jsxs","cookies","token","get","Main","userData","setUserData","loading","setLoading","fetchUserData","response","fetch","method","headers","concat","ok","data","json","console","error","statusText","children","log","className","path","element","to","replace"],"sources":["C:/Users/shubh/OneDrive/Desktop/pooja assignment/client/src/Main.js"],"sourcesContent":["import \"./css/Main.css\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { BrowserRouter as Router, Route, Routes, Navigate } from 'react-router-dom';\r\nimport Home from './components/Home';\r\nimport Signup from './components/Signup';\r\nimport Cookies from 'universal-cookie';\r\n\r\nconst cookies = new Cookies();\r\nconst token = cookies.get('token');\r\n\r\nfunction Main() {\r\n  const [userData, setUserData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      fetchUserData();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [token]);\r\n\r\n  const fetchUserData = async () => {\r\n    try {\r\n      const response = await fetch('https://login-registration-system-backend4.onrender.com/api/auth/profile', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setUserData(data);\r\n      } else {\r\n        console.error('Failed to fetch user data:', response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading....</div>; // Replace with your preferred loading indicator\r\n  }\r\n\r\n  console.log(\"userdata from main:\", userData);\r\n\r\n  return (\r\n    <div className='Main'>\r\n      <Router>\r\n        <Routes>\r\n          <Route path=\"/\" element={<Signup />} />\r\n          <Route \r\n            path=\"/home\" \r\n            element={ userData ? <Home /> : <Navigate to=\"/\" replace />} \r\n          />\r\n        </Routes>\r\n      </Router> \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n"],"mappings":"AAAA,MAAO,gBAAgB,CACvB,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,KAAK,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CACpC,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,OAAO,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAL,OAAO,CAAC,CAAC,CAC7B,KAAM,CAAAM,KAAK,CAAGD,OAAO,CAACE,GAAG,CAAC,OAAO,CAAC,CAElC,QAAS,CAAAC,IAAIA,CAAA,CAAG,CACd,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,GAAIe,KAAK,CAAE,CACTO,aAAa,CAAC,CAAC,CACjB,CAAC,IAAM,CACLD,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACN,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAO,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,0EAA0E,CAAE,CACvGC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYZ,KAAK,CAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF,GAAIQ,QAAQ,CAACK,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClCX,WAAW,CAACU,IAAI,CAAC,CACnB,CAAC,IAAM,CACLE,OAAO,CAACC,KAAK,CAAC,4BAA4B,CAAET,QAAQ,CAACU,UAAU,CAAC,CAClE,CACF,CAAE,MAAOD,KAAK,CAAE,CACdD,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CAAC,OAAS,CACRX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAID,OAAO,CAAE,CACX,mBAAOT,IAAA,QAAAuB,QAAA,CAAK,aAAW,CAAK,CAAC,CAAE;AACjC,CAEAH,OAAO,CAACI,GAAG,CAAC,qBAAqB,CAAEjB,QAAQ,CAAC,CAE5C,mBACEP,IAAA,QAAKyB,SAAS,CAAC,MAAM,CAAAF,QAAA,cACnBvB,IAAA,CAACR,MAAM,EAAA+B,QAAA,cACLrB,KAAA,CAACR,MAAM,EAAA6B,QAAA,eACLvB,IAAA,CAACP,KAAK,EAACiC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAE3B,IAAA,CAACH,MAAM,GAAE,CAAE,CAAE,CAAC,cACvCG,IAAA,CAACP,KAAK,EACJiC,IAAI,CAAC,OAAO,CACZC,OAAO,CAAGpB,QAAQ,cAAGP,IAAA,CAACJ,IAAI,GAAE,CAAC,cAAGI,IAAA,CAACL,QAAQ,EAACiC,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAE,CAC7D,CAAC,EACI,CAAC,CACH,CAAC,CACN,CAAC,CAEV,CAEA,cAAe,CAAAvB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}